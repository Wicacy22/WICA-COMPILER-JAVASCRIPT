<html><head><base href="https://compiler.example.com/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WICA COMPILER</title>
<style>
  body {
    font-family: monospace;
    background-color: #f0f0f0;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #editor, #output {
    width: 90%;
    height: 200px;
    margin: 10px 0;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
  }
  #editor {
    background-color: #1e1e1e;
    color: #d4d4d4;
    font-family:  monospace;
  }
  #output {
    background-color: #ffffff;
    overflow-y: auto;
  }
  button {
    background-color: #040704;
    border: none;
    color: white;
    padding: 10px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s;
  }
  button:hover {
    background-color: #070606;
  }
  h1 {
    color: #333;
  }
</style>
</head>
<body>
  <h1>WICA COMPILER JAVASCRIPT</h1>
  <textarea id="editor" placeholder="Enter your JavaScript code here..."></textarea>
  <button onclick="compileAndRun()">Compile and Run</button>
  <div id="output"></div>

  <script>
    function compileAndRun() {
      const code = document.getElementById('editor').value;
      const output = document.getElementById('output');
      output.innerHTML = ''; // Clear previous output

      // Create a new function to run the code in a separate scope
      try {
        const runCode = new Function('console', code);
        
        // Create a custom console object to capture log output
        const customConsole = {
          log: function(...args) {
            output.innerHTML += args.map(arg => {
              if (typeof arg === 'object') {
                return JSON.stringify(arg);
              }
              return arg;
            }).join(' ') + '<br>';
          },
          error: function(...args) {
            output.innerHTML += '<span style="color: red;">' + args.join(' ') + '</span><br>';
          }
        };

        // Run the code with the custom console
        runCode(customConsole);
      } catch (error) {
        output.innerHTML = '<span style="color: red;">Error: ' + error.message + '</span>';
      }
    }

    // Add some example code to the editor
    document.getElementById('editor').value = `// Welcome to the Basic JavaScript Compiler!
// Try running this example code or write your own.

function greet(name) {
  return "Hello, " + name + "!";
}

console.log(greet("World"));

// Let's do some math
for (let i = 1; i <= 5; i++) {
  console.log(i + " squared is " + (i * i));
}

// Arrays and objects
const fruits = ["apple", "banana", "cherry"];
console.log("Fruits:", fruits);

const person = {
  name: "Alice",
  age: 30,
  hobbies: ["reading", "coding"]
};
console.log("Person:", person);

// Uncomment the next line to see error handling
// console.log(undefinedVariable);
`;
  </script>
</body></html>
